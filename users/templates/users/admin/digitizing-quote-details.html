{% extends "users/admin/base.html" %}
{% load static %}

{% block content %}
<h2 class="mt-3">Digitizing Quote Details</h2>

<div class="card mt-3">
  <div class="card-body">
    <p><strong>Customer:</strong> {{ quote.user.get_full_name }}</p>
    <p><strong>Design Name:</strong> {{ quote.name }}</p>
    <p><strong>Placement:</strong> {{ quote.logo_placement|default:"-" }}</p>
    <p><strong>Status:</strong> {{ quote.quote_status }}</p>
    <p><strong>Created At:</strong> {{ quote.created_at|date:"M d, Y H:i A" }}</p>
    <p><strong>Files:</strong> {{ files.count }}</p>
    <ul>
      {% for file in files %}
        <li><a href="{{ file.file.url }}" target="_blank">{{ file.file.name }}</a></li>
      {% empty %}
        <li>No files uploaded.</li>
      {% endfor %}
    </ul>
  </div>
</div>

{% if can_finalize %}
<div class="mt-3">
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <input type="hidden" name="action" value="finalize">

    <div class="mb-2">
      <label for="price">Set Price</label>
      <input type="number" step="0.01" name="price" id="price" class="form-control" required>
    </div>

    <div class="mb-2 form-check">
      <input type="checkbox" class="form-check-input" name="send_email" id="send_email" value="1" checked>
      <label class="form-check-label" for="send_email">Send email to customer</label>
    </div>

    <div class="mb-2">
      <label for="admin_message">Message (optional)</label>
      <textarea name="admin_message" id="admin_message" class="form-control" rows="3" placeholder="Add an optional message that will be included in the email."></textarea>
    </div>

    <button type="submit" class="btn btn-primary">Finalize Quote</button>
  </form>
</div>
{% endif %}
{% endblock %}
